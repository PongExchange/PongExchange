"use strict";

var assert = require('assert');
var Game = require('../../src/node_modules/models/Game');
var Player = require('../../src/node_modules/models/Player');
var TestHelpers = require('TestHelpers');
var Sql = require('../../src/node_modules/Sql');
var SqlBuilder = require('../../src/node_modules/SqlBuilder');

suite('SqlBuilder tests', function ()
{
	test.only('where clauses', function* ()
	{
		// add a test game
		yield TestHelpers.getGame();
		
		var sql = Sql.fromComment(function ()
		{/*!
	
select 
	count(*) as game_count
from 
	games g
--[SqlBuilder: where]

*/
		});
		
		var builder = new SqlBuilder(),
			template = builder.newTemplate(sql);
		
		builder.where('g.id > 0');
		
		var queryResult = yield template.query();
		assert.equal(queryResult.rows[0].game_count, 1, 'should have 1 game, slappy');
	});
	
	
});