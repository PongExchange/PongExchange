"use strict";
/* -------------------------------------------------------------------
 * Require Statements << Keep in alphabetical order >>
 * ---------------------------------------------------------------- */

//

/* =============================================================================
 * 
 * Middleware - Custom middleware for just our app.
 *  
 * ========================================================================== */

var Middleware = module.exports;

/* -------------------------------------------------------------------
 * Static Methods << Keep in alphabetical order >>
 * ---------------------------------------------------------------- */

Middleware.jadeContextVariables = function * (next)
{
	this._render = this.render;
	this.render = render;
	yield next;
};

/* -------------------------------------------------------------------
 * Private Methods << Keep in alphabetical order >>
 * ---------------------------------------------------------------- */

function * render (template, locals, force)
{
	// jshint validthis: true
	if (!locals)
		locals = {};

	if (!locals.player)
		locals.player = this.player;

	yield this._render(template, locals, force);
}
